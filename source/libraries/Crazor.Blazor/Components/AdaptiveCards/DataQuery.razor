@using global::AdaptiveCards
@using Microsoft.AspNetCore.Components;
@inherits ItemComponent<AdaptiveDataQuery>

<ac:Data.Query @attributes="@GetAttributes()">
    <CascadingValue Name="ParentModel" Value="@Model">@ChildContent</CascadingValue>
</ac:Data.Query>


@code
{
    [Parameter]
    public Int32? Count { get => Model.Count; set => Model.Count = value ?? 10; }

    [Parameter]
    public String Dataset { get => Model.Dataset; set => Model.Dataset = value; }

    [Parameter]
    public Int32? Skip { get => Model.Skip; set => Model.Skip = value ?? 0; }

    [Parameter]
    public String Value { get => Model.Value; set => Model.Value = value; }

    protected override void OnParametersSet()
    {
        base.OnParametersSet();

        if (ParentModel is AdaptiveChoiceSetInput choiceSet)
        {
            choiceSet.DataQuery = Model;
        }
    }
}
