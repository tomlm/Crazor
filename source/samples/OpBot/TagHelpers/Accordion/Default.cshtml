@using Crazor
@using OpBot.TagHelpers.Accordion
@model AccordionTagHelper
@{
    var id = Utils.GetNewId(); ;
    var showButtonId = $"{id}Show";
    var hideButtonId = $"{id}Hide";
    var contentId = $"{id}Content";
}

<Container Separator="true" @Html.Raw(String.IsNullOrEmpty(Model.Id) ? String.Empty : $"Id=\"{Model.Id}\"")>
    <ColumnSet Spacing="none">
        <Column Width="stretch">
            <SelectAction xsi:type="Action.ToggleVisibility">
                <TargetElement ElementId="@showButtonId" />
                <TargetElement ElementId="@hideButtonId" />
                <TargetElement ElementId="@contentId" />
            </SelectAction>
            <TextBlock Wrap="true" Size="large">@Model.Title</TextBlock>
        </Column>
        <Column Width="auto">
            <Image Id="@showButtonId" IsVisible="@((!Model.IsExpanded).ToString().ToLower())" Url="https://cdn0.iconfinder.com/data/icons/leading-international-corporate-website-app-collec/16/Collaps_menu-32.png" Size="auto">
                <SelectAction xsi:type="Action.ToggleVisibility">
                    <TargetElement ElementId="@showButtonId" />
                    <TargetElement ElementId="@hideButtonId" />
                    <TargetElement ElementId="@contentId" />
                </SelectAction>
            </Image>
            <Image Id="@hideButtonId" IsVisible="@Model.IsExpanded.ToString().ToLower()" Url="https://cdn0.iconfinder.com/data/icons/leading-international-corporate-website-app-collec/16/Expand_menu-32.png" Size="auto">
                <SelectAction xsi:type="Action.ToggleVisibility">
                    <TargetElement ElementId="@showButtonId" />
                    <TargetElement ElementId="@hideButtonId" />
                    <TargetElement ElementId="@contentId" />
                </SelectAction>
            </Image>
        </Column>
    </ColumnSet>
    <Container Id="@contentId" IsVisible="@Model.IsExpanded.ToString().ToLower()" Style="emphasis" Spacing="none">
        @Model.ChildContent
    </Container>
</Container>