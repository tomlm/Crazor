@using OpBot.Cards.DataQuery
@using AdaptiveCards
@inherits CardView

<Card xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" Version="1.5">
    <Input.ChoiceSet Id="Option" Style="Filtered" Value="@Option">
        <Choice Title="1" Value="1" />
        <Choice Title="2" Value="2" />
        <Choice Title="3" Value="3" />
        <Choice Title="4" Value="4" />
        <Data.Query Dataset="MyDataSet" />
    </Input.ChoiceSet>
    <Action.Execute Title="Do Something" Verb="Something"/>
</Card>


@functions {

    [BindProperty]
    public int Option { get; set; }

    public AdaptiveChoice[] GetMyDataSetChoices(string queryText, int top=10, int skip=0)
    {
        return Enumerable.Range(1, 1000000)
           .Where(v => v.ToString().StartsWith(queryText?.Trim() ?? String.Empty))
           .Skip(skip)
           .Take(top)
           .Select(v => new AdaptiveChoice()
               {
                   Title = v.ToString(),
                   Value = v.ToString()
               }).ToArray();
    }

    //public async Task<AdaptiveChoice[]> GetMyDataSetChoicesAsync(string queryText, int top = 10, int skip = 0)
    //{
    //}
}