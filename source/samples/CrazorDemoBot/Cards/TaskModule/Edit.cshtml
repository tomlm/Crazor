@using CrazorDemoBot.Cards.TaskModule
@inherits CardView<TaskModuleApp>

<Card Version="1.5" Title="Test Task Module Functionality">
    <TextBlock>Counter is @App.Counter!</TextBlock>

    @if (IsTaskModule && !IsPreview)
    {
        <Input.ChoiceSet Binding="TaskAction" Style="Expanded" />
    }
    <Action.Execute Verb="@nameof(OnIncrement)" Title="Increment" />

    @if (IsTaskModule && !IsPreview)
    {
        <Action.Cancel />
        <Action.OK />
    }
</Card>

@functions {

    [BindProperty]
    public TaskModuleAction TaskAction { get; set; }

    public void OnIncrement() => App.Counter++;

    public void OnOK()
    {
        CloseTaskModule(TaskAction);
        CloseView();
    }

    public void OnCancel()
    {
        CloseTaskModule(TaskModuleAction.None);
    }
}
