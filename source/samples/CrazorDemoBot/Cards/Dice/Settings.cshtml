@using Crazor
@using CrazorDemoBot.Cards.Dice
@inherits CardView<DiceApp>
@attribute [TaskModule(Title="Change Dice Settings", Width = "small", Height = "small")]

<Card Version="1.5">
    <Input.Text Binding="App.DiceName" />
    <Input.Number Binding="App.NumberDice" />

    @if (IsModelValid)
    {
        <Action.Cancel />
    }
    <Action.OK />
</Card>

@functions {
    public void OnOK()
    {
        if (this.IsModelValid)
        {
            this.App.SharedId = App.DiceName!.Trim();
            this.App.RollDice();
            this.CloseTaskModule(TaskModuleAction.Auto);
            CloseView();
        }
    }
}