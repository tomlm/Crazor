@{
    var id = Utils.GetNewId(); ;
    var showButtonId = $"{id}Show";
    var hideButtonId = $"{id}Hide";
    var contentId = $"{id}Content";
}

<Container Separator="true" Id="@Id">
    <ColumnSet Spacing="AdaptiveSpacing.None">
        <Column Width="stretch">
            <SelectAction>
                <ActionToggleVisibility>
                    <TargetElement ElementId="@showButtonId" />
                    <TargetElement ElementId="@hideButtonId" />
                    <TargetElement ElementId="@contentId" />
                </ActionToggleVisibility>
            </SelectAction>
            @if (!String.IsNullOrEmpty(Title))
            {
                <TextBlock Wrap="@true" Size="AdaptiveTextSize.Large">@Title</TextBlock>
            }
        </Column>
        <Column Width="Auto">
            <Image Id="@showButtonId" IsVisible=@(IsExpanded) Url="https://cdn0.iconfinder.com/data/icons/leading-international-corporate-website-app-collec/16/Collaps_menu-32.png" Size="AdaptiveImageSize.Auto">
                <SelectAction>
                    <ActionToggleVisibility>
                        <TargetElement ElementId="@showButtonId" />
                        <TargetElement ElementId="@hideButtonId" />
                        <TargetElement ElementId="@contentId" />
                    </ActionToggleVisibility>
                </SelectAction>
            </Image>
            <Image Id="@hideButtonId" IsVisible=@(!IsExpanded) Url="https://cdn0.iconfinder.com/data/icons/leading-international-corporate-website-app-collec/16/Expand_menu-32.png" Size="AdaptiveImageSize.Auto">
                <SelectAction>
                    <ActionToggleVisibility>
                        <TargetElement ElementId="@showButtonId" />
                        <TargetElement ElementId="@hideButtonId" />
                        <TargetElement ElementId="@contentId" />
                    </ActionToggleVisibility>
                </SelectAction>
            </Image>
        </Column>
    </ColumnSet>
    <Container Id="@contentId" IsVisible=@IsExpanded Style="AdaptiveContainerStyle.Emphasis" Spacing="AdaptiveSpacing.None">
        @ChildContent
    </Container>
</Container>

@code {
    [Parameter]
    public string Id { get; set; }

    [Parameter]
    public string Title { get; set; } 

    [Parameter]
    public bool IsExpanded { get; set; } 

    [Parameter]
    public RenderFragment ChildContent { get; set; }
}